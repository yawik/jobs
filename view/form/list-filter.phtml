<?php
/**
 * Cross Applicant Management
 *
 * @filesource
 * @copyright (c) 2013 Cross Solution (http://cross-solution.de)
 * @license   AGPLv3
 */
$this->headScript()->appendFile($this->basePath('Jobs/js/jobs.index.js'));


$createRadioGroup = function ($element, $id) {
    $input = '';
    ?><div id="params-<?php echo $id ?>-group" class="btn-group" data-toggle="buttons-radio">
    <?php foreach ($element->getValueOptions() as $value => $label):
        if ($value == $element->getValue()):
            $btnClass = "btn active"; 
            $input = '<input id="params-' . $id . '-value" type="hidden" name="' . $element->getName() . '" value="' . $value .'" />';
        else:
            $btnClass = "btn";
        endif;?>
        <button id="params-<?php echo "$id-$value" ?>" type="button" class="btn-small <?php echo $btnClass ?>" value="<?php echo $value ?>"><?php echo $label ?></button>
    <?php endforeach; ?>
    
    </div><?php return $input;
};
/*$createDropdown = function ($element, $id) {
    
    $input = '';
    ?><div class="dropdown"><button class="btn btn-small dropdown-toggle" data-target="#" data-toggle="dropdown" id="params-<?php echo $id ?>">
        <?php echo $element->getLabel() ?>: <?php echo $element->getValue() ?> <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <?foreach ($element->getValueOptions() as $value => $label):?>
        <li id="params-<?php echo "$id-$value" ?>" class="<?php $value == $element->getValue() ? "inactive" : "" ?>">
            <a href="#"><?php echo $label ?></a>
        </li>
        <?php endforeach ?>
    </ul></div>
    <?php $input = '<input id="params-' . $id . '-value" type="hidden" name="' . $element->getName() . '" value="' . $element->getValue() .'" />';
    return $input;
};*/


$form   = $this->element;
$params = $this->element->get('params'); 
$form->setAttributes(array(
    'action' => $this->url('lang/jobs', array(), true),
    'method' => 'GET',
));

echo $this->form()->openTag($form);
echo $this->formHidden($params->get('page'));

$byElement = $params->get('by');
$statusElement = $params->get('status');
?>
<?php if ($params->has('by')):?>
<div class="row-fluid">
<div class="btn-toolbar span12">
<?php $hiddenBy = $createRadioGroup($params->get('by'), 'by') ?>
<?php $hiddenStatus = $createRadioGroup($params->get('status'), 'status') ?>
</div> <!-- /btn-toolbar -->
</div>
<?php endif; ?>
<div class="row-fluid">
<div id="params-search-wrapper" class="btn-group input-prepend input-append span12   pull-right">
    <span class="add-on"><?php echo $this->translate('Keywords') ?>: </span>
    <?php echo $this->formText($params->get('search')->setAttributes(array('class' => 'input-xxlarge'))) ?>
    <div class="btn-group">
        <button class="btn btn-primary" type="submit"><?php echo $this->translate('Go!') ?></button>
        <button class="btn dropdown-toggle" data-toggle="dropdown" data-target="#">
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li><a id="jobs-list-filter-reset" href="#"><?php echo $this->translate('Reset filter')?></a></li>
        </ul>
    </div>
    
</div>
</div> <!-- /row-fluid -->
<?php if ($params->has('by')):
echo $hiddenBy.$hiddenStatus;
endif;
echo $this->form()->closeTag();
?>
